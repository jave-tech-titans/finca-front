<p-toast></p-toast>
<div class="min-h-screen flex items-center justify-center bg-slate-200 py-12 px-4 sm:px-6 lg:px-8">
    <p-card 
        styleClass="bg-white shadow-2xl rounded-2xl"
        [style]="{ width: '35rem' }"
    >   
        <div class="flex flex-col space-y-6 p-8" data-cy="register-form">
            <h1 class="text-3xl font-bold text-gray-900 text-center">Regístrate</h1>

            <div class="w-full">
                <p-floatlabel>
                    <input 
                        pInputText 
                        id="name" 
                        [(ngModel)]="names" 
                        autocomplete="off"
                        data-cy="name-input"
                        class="w-full px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent transition duration-200" 
                    />
                    <label for="email" class="text-gray-600">Nombres</label>
                </p-floatlabel>
                <small class="text-red-500" data-cy="name-error" *ngIf="nameError">{{ nameError }}</small>
            </div>

            <div class="w-full">
                <p-floatlabel>
                    <input 
                        pInputText 
                        id="lastNames" 
                        [(ngModel)]="lastNames" 
                        autocomplete="off"
                        data-cy="lastname-input"
                        class="w-full px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent transition duration-200" 
                    />
                    <label for="email" class="text-gray-600">Apellidos</label>
                </p-floatlabel>
                <small class="text-red-500" data-cy="lastname-error" *ngIf="lastNameError">{{ lastNameError }}</small>
            </div>

            <div class="w-full">
                <p-floatlabel>
                    <input 
                        pInputText 
                        id="email" 
                        [(ngModel)]="email" 
                        autocomplete="off"
                        data-cy="email-input"
                        class="w-full px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent transition duration-200" 
                    />
                    <label for="email" class="text-gray-600">Correo electrónico</label>
                </p-floatlabel>
                <small class="text-red-500" data-cy="email-error" *ngIf="emailError">{{ emailError }}</small>
            </div>

            <div class="w-full">
                <p-floatlabel>
                    <input 
                        pInputText 
                        id="password" 
                        [(ngModel)]="password"
                        type="password" 
                        autocomplete="off"
                        data-cy="password-input"
                        class="w-full px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent transition duration-200" 
                    />
                    <label for="password" class="text-gray-600">Contraseña</label>
                </p-floatlabel>
                <small class="text-red-500" data-cy="password-error" *ngIf="passwordError">{{ passwordError }}</small>
            </div>

            <div class="w-full">
                <p-floatlabel>
                    <input 
                        pInputText 
                        id="number" 
                        [(ngModel)]="number" 
                        type="number" 
                        autocomplete="off"
                        data-cy="phone-input"
                        class="w-full px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent transition duration-200" 
                    />
                    <label for="email" class="text-gray-600">Número</label>
                </p-floatlabel>
                <small class="text-red-500" data-cy="phone-error" *ngIf="phoneError">{{ phoneError }}</small>
            </div>

            <div class="w-full flex justify-center">
                <p-selectbutton 
                    [options]="roleOptions" 
                    [(ngModel)]="role" 
                    data-cy="role-select"
                    class="ng-invalid ng-dirty"
                />
                <small class="text-red-500" data-cy="role-error" *ngIf="roleError">{{ roleError }}</small>
            </div>

            <div class="flex flex-col space-y-4 items-center">
                <p-button 
                    label="Registrarse" 
                    (onClick)="register()" 
                    data-cy="register-button"
                    severity="info" 
                    styleClass="w-full p-button-rounded p-button-success p-button-lg" 
                />
                
                <p-button 
                    label="¿Ya tienes cuenta? Inicia sesión" 
                    variant="outlined" 
                    severity="info" 
                    size="small" 
                    (onClick)="goToLogin()" 
                    styleClass="p-button-text" 
                />
            </div>

            <div class="text-red-500 text-center" data-cy="register-error" *ngIf="registerError">
                {{ registerError }}
            </div>

            <div class="text-green-500 text-center" data-cy="success-message" *ngIf="successMessage">
                {{ successMessage }}
            </div>
        </div>
    </p-card>
</div>
